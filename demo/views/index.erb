<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Syncshare test</title>
    <script type="text/javascript" src="client.js"></script>
  </head>
  <body>
    Welcome on the board <em> <%= current_user['name'] %> </em>
  </body>

  <script type="text/javascript">

    var client = new Syncshare.Client('http://localhost:8080/syncshare/twitter', {token: "<%= current_user['name'] %>"}).connect(function(session) {
        session
           .on('upload', function(data, isBroadcast) {
               console.log('DATA', data, 'BROADCAST', isBroadcast);
           });


            // classic call
            //session.call('upload', { abc: 1 });
    
            // RPC call
            var rpc = session.rpc();
            
			rpc.upload({abc: 2}, 'dupa').then(function(success) { console.log('SUCCESS', success); }, function(error) { console.log('ERROR', error); });
    });


  </script>
</html>
